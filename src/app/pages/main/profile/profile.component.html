<div  class="main__author bg-img" style="background: url('{{ imgBaseUrl + userProfile.user.cover_pic }}');">
	<input type="file" name="cover" #cover (change)="fileChangeEvent($event.target.files, 'cover')" style="display: none;"/>
	<button class="home__btn home__btn--clr btn-profile cover-img-btn" (click)="cover.click()">Change Cover</button>
</div>
<div class="container">
	<div class="row row--grid">
		<div class="col-12 col-xl-3">
			<div class="author author--page">
				<div class="author__meta">
					<a  class="author__avatar author__avatar--verified">
						<img src="{{ userProfile?.user?.profile_pic === '' ? '/assets/img/avatars/avatar5.jpg' : imgBaseUrl + userProfile?.user?.profile_pic }}" alt="">
					</a>
					<form  formGroup="profilePicForm">
						<input type="file" name="profile" #profile (change)="fileChangeEvent($event.target.files, 'profile')" formControlName="profilePic" style="display: none;"/>
						<button class="home__btn home__btn--clr btn-profile" (click)="profile.click()">Change Picture</button>
					</form>
					<h1 class="author__name"><a [routerLink]="" >{{ userProfile?.user?.name }}</a></h1>
					<h2 class="author__nickname"><a [routerLink]="">{{ userProfile?.user?.email }}</a></h2>
					
					<p class="author__text">{{ userProfile?.user?.about_us }}</p>
						

					<div class="author__social">
							<a [routerLink]="" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.9,2H3.1A1.1,1.1,0,0,0,2,3.1V20.9A1.1,1.1,0,0,0,3.1,22h9.58V14.25h-2.6v-3h2.6V9a3.64,3.64,0,0,1,3.88-4,20.26,20.26,0,0,1,2.33.12v2.7H17.3c-1.26,0-1.5.6-1.5,1.47v1.93h3l-.39,3H15.8V22h5.1A1.1,1.1,0,0,0,22,20.9V3.1A1.1,1.1,0,0,0,20.9,2Z"/></svg></a>

							<a [routerLink]="" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.34,5.46h0a1.2,1.2,0,1,0,1.2,1.2A1.2,1.2,0,0,0,17.34,5.46Zm4.6,2.42a7.59,7.59,0,0,0-.46-2.43,4.94,4.94,0,0,0-1.16-1.77,4.7,4.7,0,0,0-1.77-1.15,7.3,7.3,0,0,0-2.43-.47C15.06,2,14.72,2,12,2s-3.06,0-4.12.06a7.3,7.3,0,0,0-2.43.47A4.78,4.78,0,0,0,3.68,3.68,4.7,4.7,0,0,0,2.53,5.45a7.3,7.3,0,0,0-.47,2.43C2,8.94,2,9.28,2,12s0,3.06.06,4.12a7.3,7.3,0,0,0,.47,2.43,4.7,4.7,0,0,0,1.15,1.77,4.78,4.78,0,0,0,1.77,1.15,7.3,7.3,0,0,0,2.43.47C8.94,22,9.28,22,12,22s3.06,0,4.12-.06a7.3,7.3,0,0,0,2.43-.47,4.7,4.7,0,0,0,1.77-1.15,4.85,4.85,0,0,0,1.16-1.77,7.59,7.59,0,0,0,.46-2.43c0-1.06.06-1.4.06-4.12S22,8.94,21.94,7.88ZM20.14,16a5.61,5.61,0,0,1-.34,1.86,3.06,3.06,0,0,1-.75,1.15,3.19,3.19,0,0,1-1.15.75,5.61,5.61,0,0,1-1.86.34c-1,.05-1.37.06-4,.06s-3,0-4-.06A5.73,5.73,0,0,1,6.1,19.8,3.27,3.27,0,0,1,5,19.05a3,3,0,0,1-.74-1.15A5.54,5.54,0,0,1,3.86,16c0-1-.06-1.37-.06-4s0-3,.06-4A5.54,5.54,0,0,1,4.21,6.1,3,3,0,0,1,5,5,3.14,3.14,0,0,1,6.1,4.2,5.73,5.73,0,0,1,8,3.86c1,0,1.37-.06,4-.06s3,0,4,.06a5.61,5.61,0,0,1,1.86.34A3.06,3.06,0,0,1,19.05,5,3.06,3.06,0,0,1,19.8,6.1,5.61,5.61,0,0,1,20.14,8c.05,1,.06,1.37.06,4S20.19,15,20.14,16ZM12,6.87A5.13,5.13,0,1,0,17.14,12,5.12,5.12,0,0,0,12,6.87Zm0,8.46A3.33,3.33,0,1,1,15.33,12,3.33,3.33,0,0,1,12,15.33Z"/></svg></a>

							<a [routerLink]="" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22,5.8a8.49,8.49,0,0,1-2.36.64,4.13,4.13,0,0,0,1.81-2.27,8.21,8.21,0,0,1-2.61,1,4.1,4.1,0,0,0-7,3.74A11.64,11.64,0,0,1,3.39,4.62a4.16,4.16,0,0,0-.55,2.07A4.09,4.09,0,0,0,4.66,10.1,4.05,4.05,0,0,1,2.8,9.59v.05a4.1,4.1,0,0,0,3.3,4A3.93,3.93,0,0,1,5,13.81a4.9,4.9,0,0,1-.77-.07,4.11,4.11,0,0,0,3.83,2.84A8.22,8.22,0,0,1,3,18.34a7.93,7.93,0,0,1-1-.06,11.57,11.57,0,0,0,6.29,1.85A11.59,11.59,0,0,0,20,8.45c0-.17,0-.35,0-.53A8.43,8.43,0,0,0,22,5.8Z"/></svg></a>

							<a href="mailto:support@seekware.in"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,4H5A3,3,0,0,0,2,7V17a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V7A3,3,0,0,0,19,4Zm-.41,2-5.88,5.88a1,1,0,0,1-1.42,0L5.41,6ZM20,17a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V7.41l5.88,5.88a3,3,0,0,0,4.24,0L20,7.41Z"/></svg></a>
					</div>
				</div>
			</div>
		</div>

		<div class="col-12 col-xl-9">
			<p class="wallet"><strong>Connected Wallet Address:</strong> {{ walletAddres }}</p>
			<div class="profile">
				<!-- tabs nav -->
				<ul class="nav nav-tabs profile__tabs" id="profile__tabs" role="tablist">
					<li class="nav-item">
						<a class="nav-link active" data-toggle="tab" href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false">My NFT</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" data-toggle="tab" href="#tab-3" role="tab" aria-controls="tab-3" aria-selected="false">My offer</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" data-toggle="tab" href="#tab-1" role="tab" aria-controls="tab-3" aria-selected="false">My Bid</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" data-toggle="tab" href="#tab-5" role="tab" aria-controls="tab-3" aria-selected="false">Transaction History</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" data-toggle="tab" href="#tab-4" role="tab" aria-controls="tab-4" aria-selected="false">Settings</a>
					</li>
				</ul>
				<!-- end tabs nav -->
			</div>

			<!-- content tabs -->
			<div class="tab-content">
				<div class="tab-pane fade show active" id="tab-2" role="tabpanel">
					<div class="row row--grid">
						<div  class="col-12 col-sm-12 col-lg-12">
							<p style="color: white;padding-top: 30px;" *ngIf="userProfile?.nfts?.length === 0">No NFT found in your account !</p>
						</div>
						<div *ngFor="let item of userProfile?.nfts" class="col-12 col-sm-6 col-lg-4">
							<!-- card -->
							<div class="card" [routerLink]="['/nft-detail', item.id]">
								<a [routerLink]="['/nft-detail', item.id]" class="card__cover">
									<img *ngIf="uriResponse[item.id] &&  (uriResponse[item.id]['fileType'] === 'IMAGE' || uriResponse[item.id]['fileType'] === 'image')" src="{{ uriResponse[item.id] &&  uriResponse[item.id]['image'] && (uriResponse[item.id]['fileType'] === 'IMAGE' || uriResponse[item.id]['fileType'] === 'image') ? uriResponse[item.id]['image'] : (item.image && item.fileType === 'IMAGE' ? item.image : 'https://via.placeholder.com/512x512.png?text=MEME+EXIHIBIT') }}" class="fix-height" alt="">

												<video *ngIf="uriResponse[item.id] &&  uriResponse[item.id]['fileType'] !== 'IMAGE' && uriResponse[item.id]['fileType'] !== 'image'" style="width: 100%;" class="fix-height"  [src]="uriResponse[item.id]['image'] | safeUrl" controls autoplay="true" [muted]="true"></video>
								</a>
								<h3 class="card__title"><a [routerLink]="['/nft-detail', item.id]">{{ item.name && item.name !== '' ? item.name : (uriResponse[item.id] ? uriResponse[item.id].name : '') }}</a></h3>
								<h3 class="card__title"><a [routerLink]="['/marketplace/detail', item.id]">NFT Token Id: {{ item.tokenId }}</a></h3>
								<h4 *ngIf="item.status === 'AVAILABLE'" class="card__title"><a>On {{ item.type === 'BID' ? 'Auction' : 'Direct Sell' }}</a></h4>
							</div>
						</div>
				</div>
				</div>

				<div class="tab-pane fade" id="tab-3" role="tabpanel">
					<div class="row">
						<!-- content -->
						<div class="col-12 col-xl-12 order-xl-1">
							<div class="row row--grid">
								<div class="col-12 col-lg-12 col-xl-12">
									<p style="color: white;padding-top: 30px;" *ngIf="userProfile?.offers?.length === 0">No Offer Request History found in your account !</p>
								</div>
								<div *ngFor="let item of userProfile?.offers" class="col-12 col-lg-12 col-xl-12">
									<div class="activity" [routerLink]="['/marketplace/detail', item.nft.id]">
										<a  [routerLink]="['/marketplace/detail', item.id]" class="activity__cover">
													<img *ngIf="uriResponse[item.id] &&  (uriResponse[item.nft.id]['fileType'] === 'IMAGE' || uriResponse[item.nft.id]['fileType'] === 'image')" src="{{ uriResponse[item.nft.id] &&  uriResponse[item.nft.id]['image'] && (uriResponse[item.nft.id]['fileType'] === 'IMAGE' || uriResponse[item.nft.id]['fileType'] === 'image') ? uriResponse[item.nft.id]['image'] : (item.nft.image && item.nft.fileType === 'IMAGE' ? item.nft.image : 'https://via.placeholder.com/512x512.png?text=MEME+EXIHIBIT') }}" class="fix-height" alt="">

												<video *ngIf="uriResponse[item.nft.id] &&  uriResponse[item.nft.id]['fileType'] !== 'IMAGE' && uriResponse[item.nft.id]['fileType'] !== 'image'" style="width: 100%;" class="fix-height"  [src]="uriResponse[item.nft.id]['image'] | safeUrl" controls autoplay="true" [muted]="true"></video>
										</a>
										<div class="activity__content">
											<h3 class="activity__title"><a [routerLink]="['/marketplace/detail', item.nft.id]">{{ item.nft.name && item.nft.name !== '' ? item.nft.name : (uriResponse[item.nft.id] ? uriResponse[item.nft.id].name : '') }}</a></h3>
											<p class="activity__text">Token Id <a>{{ item.nft.tokenId }}</a> <br>Offer Price <b>{{ item.price.toFixed(2)  }} BUSD</b></p>
											<span class="activity__time">{{ item.createdAt | date:'short' }}</span>
										</div>
									</div>
								</div>
							</div>
							<!-- end collapse -->
						</div>
						<!-- end content -->
					</div>
				</div>

				<div class="tab-pane fade" id="tab-5" role="tabpanel">
					<div class="row">
						<!-- content -->
						<div class="col-12 col-xl-12 order-xl-1">
							<div class="row row--grid">
								<div class="col-12 col-lg-12 col-xl-12">
									<p style="color: white;padding-top: 30px;" *ngIf="userProfile?.transactions?.length === 0">No Transaction History found in your account !</p>
								</div>
								<div class="col-12 col-lg-12 col-xl-12">
									<table class="table table-dark table-bordered table-responsive">
										<thead>
											<tr>
												<th style="width: 15%;">Date</th>
												<th style="width: 10%;">Type</th>
												<th style="width: 15%;">Amount</th>
												<th style="width: 35%;">Txn Hash</th>
												<th style="width: 40%;">Account Address</th>
											</tr>
											</thead>
											<tbody>
												<tr *ngFor="let item of userProfile.transactions">
													<td scope="row">{{ item.createdAt | date:'short' }}</td>
													<td>{{ item.type }}</td>
													<td>{{ item.amount ? item.amount : convertAmount(item) }}</td>
													<td><a href="https://bscscan.com/tx/{{ item.txnHash }}" target="_blank">{{ item.txnHash }}</a></td>
													<td><a href="https://bscscan.com/address/{{ item.transactionDetail.to }}" target="_blank">{{ item.transactionDetail.to }}</a></td>
												</tr>
											</tbody>
									</table>
								</div>
							</div>
							<!-- end collapse -->
						</div>
						<!-- end content -->
					</div>
				</div>

				<div class="tab-pane fade" id="tab-1" role="tabpanel">
					<div class="row">
						<!-- content -->
						<div class="col-12 col-xl-12 order-xl-1">
							<div class="row row--grid">
								<div class="col-12 col-lg-12 col-xl-12">
									<p style="color: white;padding-top: 30px;" *ngIf="userProfile?.bids?.length === 0">No Bid Request History found in your account !</p>
								</div>
								<div *ngFor="let item of userProfile?.bids" class="col-12 col-lg-12 col-xl-12">
									<div class="activity" [routerLink]="['/marketplace/detail', item.nft.id]" >
										<a  [routerLink]="['/marketplace/detail', item.nft.id]" class="activity__cover">
													<img *ngIf="uriResponse[item.id] &&  (uriResponse[item.nft.id]['fileType'] === 'IMAGE' || uriResponse[item.nft.id]['fileType'] === 'image')" src="{{ uriResponse[item.nft.id] &&  uriResponse[item.nft.id]['image'] && (uriResponse[item.nft.id]['fileType'] === 'IMAGE' || uriResponse[item.nft.id]['fileType'] === 'image') ? uriResponse[item.nft.id]['image'] : (item.nft.image && item.nft.fileType === 'IMAGE' ? item.nft.image : 'https://via.placeholder.com/512x512.png?text=MEME+EXIHIBIT') }}" class="fix-height" alt="">

												<video *ngIf="uriResponse[item.nft.id] &&  uriResponse[item.nft.id]['fileType'] !== 'IMAGE' && uriResponse[item.nft.id]['fileType'] !== 'image'" style="width: 100%;" class="fix-height"  [src]="uriResponse[item.nft.id]['image'] | safeUrl" controls autoplay="true" [muted]="true"></video>
										</a>
										<div class="activity__content">
											<h3 class="activity__title"><a [routerLink]="['/marketplace/detail', item.nft.id]">{{ item.nft.name && item.nft.name !== '' ? item.nft.name : (uriResponse[item.nft.id] ? uriResponse[item.nft.id].name : '') }}</a></h3>
											<p class="activity__text">Token Id <a >{{ item.nft.tokenId }}</a> <br>Bid Price <b>{{ item.price.toFixed(2)  }} BUSD</b></p>
											<p class="activity__text">Status : {{ item.status }}</p>
											<span class="activity__time">{{ item.createdAt | date:'short' }}</span>
										</div>
									</div>
								</div>
							</div>
							<!-- end collapse -->
						</div>
						<!-- end content -->
					</div>
				</div>

				<div class="tab-pane fade" id="tab-4" role="tabpanel">
					<div class="row row--grid">
						<!-- details form -->
						<div class="col-12 col-lg-6">
							<form [formGroup]="profileForm" class="sign__form sign__form--profile">
								<div class="row">
									<div class="col-12">
										<h4 class="sign__title">Profile details</h4>
									</div>

									<div class="col-12 col-md-12 col-lg-12 col-xl-12">
										<div class="sign__group">
											<label class="sign__label" for="firstname">Name</label>
											<input id="firstname" formControlName="name" type="text" name="firstname" class="sign__input" placeholder="Enter Your Name">
											<app-error-field [errorMsg]="getProfileForm.name"></app-error-field>
										</div>
									</div>

									<div class="col-12 col-md-12 col-lg-12 col-xl-12">
										<div class="sign__group">
											<label class="sign__label" for="email">Email</label>
											<input id="email" type="email" formControlName="email" name="email" class="sign__input" placeholder="Your Email" readonly>
											<app-error-field [errorMsg]="getProfileForm.email"></app-error-field>
										</div>
									</div>

									<div class="col-12 col-md-12 col-lg-12 col-xl-12">
										<div class="sign__group">
											<label class="sign__label" for="lastname">About Us</label>
											<input id="lastname" formControlName="about_us" type="text" name="lastname" class="sign__input" placeholder="Avout Yourself">
											<app-error-field [errorMsg]="getProfileForm.about_us"></app-error-field>
										</div>
									</div>

									<div class="col-12">
										<button [disabled]="!profileForm.valid" (click)="updateProfileAction()" class="sign__btn" type="button">Save</button>
									</div>
								</div>
							</form>
						</div>
						<!-- end details form -->

						<!-- password form -->
						<div class="col-12 col-lg-6">
							<form [formGroup]="passwordForm" class="sign__form sign__form--profile">
								<div class="row">
									<div class="col-12">
										<h4 class="sign__title">Change password</h4>
									</div>
									
									<div class="col-12 col-md-12 col-lg-12 col-xl-12">
										<div class="sign__group">
											<label class="sign__label" for="newpass">New password</label>
											<input id="newpass"  formControlName="password" type="password" name="newpass" class="sign__input">
											<app-error-field [errorMsg]="getPasswordForm.password"></app-error-field>
										</div>
									</div>

									<div class="col-12 col-md-12 col-lg-12 col-xl-12">
										<div class="sign__group">
											<label class="sign__label" for="confirmpass">Confirm new password</label>
											<input id="confirmpass" formControlName="confirm_password"  type="password" name="confirmpass" class="sign__input">
											<app-error-field [errorMsg]="getPasswordForm.confirm_password"></app-error-field>
										</div>
									</div>

									<div class="col-12">
										<button [disabled]="!passwordForm.valid" (click)="changePasswordAction()" class="sign__btn" type="button">Change</button>
									</div>
								</div>
							</form>
						</div>
						<!-- end password form -->
					</div>
				</div>
			</div>
			<!-- end content tabs -->
		</div>
	</div>	
</div>
